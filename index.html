<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love ShinDig 2026 | Planning Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals with Subtle Accents -->
    <!-- Application Structure Plan: A task-oriented dashboard SPA. A sticky navigation bar provides non-linear access to key planning sections (Timeline, Venues, Budget, Itinerary, etc.). This structure is chosen for usability, allowing a planner to quickly access specific information without scrolling through the entire document, making it a functional tool rather than a static report. -->
    <!-- Visualization & Content Choices: 
        - Timeline: Goal: Change/Organize. Method: Interactive HTML/CSS vertical timeline. Interaction: Hover effects. Justification: Visualizes the phased plan engagingly. NO SVG/Mermaid.
        - Venue Explorer: Goal: Compare/Organize. Method: Filterable HTML cards. Interaction: Button filters update the view. Justification: Allows users to dynamically explore venue options by location. NO SVG/Mermaid.
        - Budget Planner: Goal: Compare/Inform. Method: Chart.js Donut Chart + dynamic text. Interaction: User input for participant count updates the budget visuals and numbers in real-time. Justification: Turns a static budget into a live planning tool. NO SVG/Mermaid.
        - Itinerary: Goal: Inform/Organize. Method: Structured HTML cards. Justification: Presents the multi-day schedule in a clear, scannable format. NO SVG/Mermaid.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfaf6;
            color: #4a4a4a;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link:hover {
            color: #c5a880;
        }
        .active-link {
            color: #c5a880;
            border-bottom: 2px solid #c5a880;
        }
        .timeline-item-content {
            transition: all 0.3s ease-in-out;
        }
        .timeline-item:hover .timeline-item-content {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.08);
        }
        .timeline-dot {
            transition: all 0.3s ease-in-out;
        }
        .timeline-item:hover .timeline-dot {
            transform: scale(1.5);
            background-color: #c5a880;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <a href="#" class="text-2xl font-bold text-[#a0845e]">Love ShinDig 2026</a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4" id="nav-menu">
                        <a href="#timeline" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Timeline</a>
                        <a href="#venues" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Venues</a>
                        <a href="#budget" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Budget</a>
                        <a href="#itinerary" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Itinerary</a>
                        <a href="#checklist" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Checklist</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section id="hero" class="py-20 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-4xl md:text-5xl font-bold tracking-tight text-[#4a4a4a]">Your Reunion Planning Dashboard</h1>
                <p class="mt-4 text-lg text-gray-600">A strategic guide to creating an unforgettable Love ShinDig for Juneteenth 2026.</p>
                <div id="countdown" class="mt-8 text-2xl md:text-4xl font-bold text-[#c5a880] space-x-2 md:space-x-6">
                </div>
            </div>
        </section>

        <section id="timeline" class="py-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center mb-4">Planning Timeline</h2>
                <p class="text-center text-gray-600 max-w-2xl mx-auto mb-12">This timeline breaks down the planning process into manageable phases. Hover over each phase to see the key tasks and focus areas, ensuring you stay on track from the initial vision to post-event celebrations.</p>
                <div class="relative">
                    <div class="absolute left-1/2 h-full w-0.5 bg-gray-200 -translate-x-1/2 hidden md:block"></div>
                    <div class="space-y-12">
                        <!-- Timeline Item 1 -->
                        <div class="relative flex flex-col md:flex-row items-center timeline-item">
                            <div class="w-full md:w-5/12 md:text-right md:pr-8 mb-4 md:mb-0">
                                <div class="bg-white p-6 rounded-lg shadow-md timeline-item-content">
                                    <h3 class="text-xl font-bold text-[#a0845e]">Phase I: Foundation</h3>
                                    <p class="text-sm font-semibold text-gray-500 mb-2">18-12 Months Out</p>
                                    <p class="text-gray-600">Establish the "why" of the reunion, form a diverse planning committee with clear roles, and create the initial financial blueprint.</p>
                                </div>
                            </div>
                            <div class="absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-gray-300 border-2 border-white timeline-dot hidden md:block"></div>
                            <div class="w-full md:w-5/12 md:pl-8"></div>
                        </div>
                        <!-- Timeline Item 2 -->
                        <div class="relative flex flex-col-reverse md:flex-row items-center timeline-item">
                            <div class="w-full md:w-5/12 md:pr-8"></div>
                            <div class="absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-gray-300 border-2 border-white timeline-dot hidden md:block"></div>
                            <div class="w-full md:w-5/12 md:pl-8 mb-4 md:mb-0">
                                <div class="bg-white p-6 rounded-lg shadow-md timeline-item-content">
                                    <h3 class="text-xl font-bold text-[#a0845e]">Phase II: Framework</h3>
                                    <p class="text-sm font-semibold text-gray-500 mb-2">12-6 Months Out</p>
                                    <p class="text-gray-600">Select the venue, integrate the cultural significance of Juneteenth, and execute a multi-channel communication plan to send "Save the Dates".</p>
                                </div>
                            </div>
                        </div>
                        <!-- Timeline Item 3 -->
                        <div class="relative flex flex-col md:flex-row items-center timeline-item">
                            <div class="w-full md:w-5/12 md:text-right md:pr-8 mb-4 md:mb-0">
                                <div class="bg-white p-6 rounded-lg shadow-md timeline-item-content">
                                    <h3 class="text-xl font-bold text-[#a0845e]">Phase III: Final Countdown</h3>
                                    <p class="text-sm font-semibold text-gray-500 mb-2">6-3 Months Out</p>
                                    <p class="text-gray-600">Finalize catering, plan a detailed itinerary with activities for all ages, and manage RSVPs and payments through official invitations.</p>
                                </div>
                            </div>
                            <div class="absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-gray-300 border-2 border-white timeline-dot hidden md:block"></div>
                            <div class="w-full md:w-5/12 md:pl-8"></div>
                        </div>
                        <!-- Timeline Item 4 -->
                        <div class="relative flex flex-col-reverse md:flex-row items-center timeline-item">
                            <div class="w-full md:w-5/12 md:pr-8"></div>
                            <div class="absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 w-4 h-4 rounded-full bg-gray-300 border-2 border-white timeline-dot hidden md:block"></div>
                            <div class="w-full md:w-5/12 md:pl-8 mb-4 md:mb-0">
                                <div class="bg-white p-6 rounded-lg shadow-md timeline-item-content">
                                    <h3 class="text-xl font-bold text-[#a0845e]">Phase IV: Post-ShinDig</h3>
                                    <p class="text-gray-600">Share memories through photos and newsletters, send thank-you notes, and gather feedback with a survey to improve future events.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="venues" class="py-16 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center mb-4">Venue Explorer</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-8">Choosing the right venue is critical. Use the filters below to explore options across Webster, League City, and Houston. Each location offers a unique atmosphere, from intimate suburban parks to grand, historic sites in the city. Consider the balance between cost, capacity, and the desired vibe for the reunion.</p>
                <div class="flex justify-center flex-wrap gap-2 mb-8" id="venue-filters">
                    <button class="filter-btn bg-[#c5a880] text-white px-4 py-2 rounded-full text-sm" data-filter="all">All Locations</button>
                    <button class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm" data-filter="Webster">Webster</button>
                    <button class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm" data-filter="League City">League City</button>
                    <button class="filter-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-full text-sm" data-filter="Houston">Houston</button>
                </div>
                <div id="venue-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                </div>
            </div>
        </section>
        
        <section id="budget" class="py-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center mb-4">Financial Blueprint</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-8">A well-planned budget is the key to a stress-free reunion. Enter your estimated number of participants below to see a real-time budget breakdown based on the **$250 per person** goal. This tool helps visualize how the total funds are allocated across key categories.</p>
                <div class="max-w-md mx-auto bg-white p-6 rounded-lg shadow-md mb-12">
                     <div class="flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                        <label for="participant-count" class="text-lg font-medium text-gray-700">Participants:</label>
                        <input type="number" id="participant-count" value="75" min="1" class="w-32 px-4 py-2 text-center rounded-lg border-2 border-gray-300 focus:outline-none focus:border-[#c5a880] transition-colors">
                    </div>
                    <div class="text-center mt-4">
                        <p class="text-lg font-medium text-gray-700">Total Estimated Budget:</p>
                        <p id="total-budget" class="text-3xl font-bold text-[#a0845e]">$18,750</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <div>
                        <h3 class="text-xl font-bold text-center mb-4">Sample Budget Allocation</h3>
                        <div class="chart-container">
                            <canvas id="budgetChart"></canvas>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-4">Catering Options</h3>
                        <p class="text-gray-600 mb-4">Your budget allows for a range of culinary experiences. Here are some ideas:</p>
                        <ul class="space-y-3">
                            <li class="flex items-start"><span class="text-2xl mr-3 text-[#c5a880]">🍖</span><div><span class="font-semibold">On-site BBQ Cookout:</span><p class="text-sm text-gray-500">Hire a caterer like Goode Co. for an authentic Texas BBQ experience.</p></div></li>
                            <li class="flex items-start"><span class="text-2xl mr-3 text-[#c5a880]">🍽️</span><div><span class="font-semibold">Formal Plated Dinner:</span><p class="text-sm text-gray-500">Part of the dinner cruise package, offering an elegant dining experience.</p></div></li>
                            <li class="flex items-start"><span class="text-2xl mr-3 text-[#c5a880]">🌮</span><div><span class="font-semibold">Casual Farewell Brunch:</span><p class="text-sm text-gray-500">A relaxed meal at La Brisa to say goodbye.</p></div></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="itinerary" class="py-16 bg-white">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center mb-4">Weekend Itinerary</h2>
                <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">Here’s a sample schedule for our Love ShinDig weekend. It balances organized events with plenty of free time for catching up, relaxing, and exploring the area on your own.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <!-- Day 1 -->
                    <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold text-[#a0845e]">Thursday, June 18</h3>
                        <p class="text-sm font-semibold text-gray-500 mb-4">Arrival & Welcome</p>
                        <ul class="space-y-3 text-gray-700">
                            <li><span class="font-semibold">Afternoon:</span> Check-in & Settle at **Great Wolf Lodge**.</li>
                            <li><span class="font-semibold">Evening:</span> Casual Welcome Mixer with light appetizers & drinks.</li>
                        </ul>
                    </div>
                    <!-- Day 2 -->
                    <div class="bg-gray-50 p-6 rounded-lg shadow-md relative">
                        <h3 class="text-xl font-bold text-[#a0845e]">Friday, June 19</h3>
                        <p class="text-sm font-semibold text-gray-500 mb-4">Juneteenth Celebration</p>
                        <button id="play-juneteenth" class="absolute top-6 right-6 inline-flex items-center justify-center p-2 rounded-full bg-[#a0845e] text-white hover:bg-[#c5a880] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#a0845e] transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                            </svg>
                        </button>
                        <ul class="space-y-3 text-gray-700">
                            <li><span class="font-semibold">Morning/Afternoon:</span> Cultural Excursion to **Emancipation Park** or the **Buffalo Soldiers National Museum**.</li>
                            <li><span class="font-semibold">Afternoon/Evening:</span> Family Games and Activities at **Great Wolf Lodge**.</li>
                        </ul>
                    </div>
                    <!-- Day 3 -->
                    <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold text-[#a0845e]">Saturday, June 20</h3>
                        <p class="text-sm font-semibold text-gray-500 mb-4">Explore & Cruise</p>
                        <ul class="space-y-3 text-gray-700">
                            <li><span class="font-semibold">Day:</span> Free time for excursions (e.g., Space Center, museums).</li>
                            <li><span class="font-semibold">Evening:</span> Celebratory Dinner Cruise on Galveston Bay.</li>
                        </ul>
                    </div>
                    <!-- Day 4 -->
                    <div class="bg-gray-50 p-6 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold text-[#a0845e]">Sunday, June 21</h3>
                        <p class="text-sm font-semibold text-gray-500 mb-4">Farewell Brunch</p>
                        <ul class="space-y-3 text-gray-700">
                            <li><span class="font-semibold">Morning:</span> Farewell Brunch at La Brisa in League City.</li>
                            <li><span class="font-semibold">Afternoon:</span> Departures.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section id="activity-ideas" class="py-16 md:py-24 bg-[#fdfaf6]">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-6 text-[#a0845e]">✨ Get Custom Activity Ideas</h2>
                <p class="text-lg text-gray-700 leading-relaxed text-center mb-8">
                    Need some fresh ideas for the reunion? Enter some details below and we'll generate fun activities just for your family!
                </p>
                <div class="max-w-xl mx-auto space-y-4">
                    <label for="activity-prompt" class="block text-sm font-medium text-gray-700">Tell us about your family:</label>
                    <textarea id="activity-prompt" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-[#a0845e] focus:ring focus:ring-[#a0845e] focus:ring-opacity-50 transition-colors" placeholder="e.g., 'Ages 5 to 70 with an interest in music, sports, and Texas history.'"></textarea>
                    <button id="generate-ideas-btn" class="w-full inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-sm font-medium rounded-full text-white bg-[#a0845e] hover:bg-[#c5a880] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#a0845e] transition-colors">
                        ✨ Generate Ideas
                    </button>
                    <div id="ideas-output" class="mt-4 p-4 border-2 border-gray-200 rounded-lg hidden">
                        <div id="loading-spinner" class="flex justify-center items-center h-24 hidden">
                            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-[#a0845e]"></div>
                        </div>
                        <div id="ideas-text"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="checklist" class="py-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center mb-4">Day-Of Essentials Checklist</h2>
                 <p class="text-center text-gray-600 max-w-3xl mx-auto mb-12">As the big day approaches, use this master checklist to ensure all logistical details are covered for a smooth and stress-free event.</p>
                <div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-md">
                    <ul class="space-y-4">
                        <li class="flex items-center"><input type="checkbox" class="h-5 w-5 rounded border-gray-300 text-[#c5a880] focus:ring-[#c5a880]"><span class="ml-3 text-gray-700">Confirm venue access times and vendor arrivals.</span></li>
                        <li class="flex items-center"><input type="checkbox" class="h-5 w-5 rounded border-gray-300 text-[#c5a880] focus:ring-[#c5a880]"><span class="ml-3 text-gray-700">Designate and mark parking areas, especially for elderly guests.</span></li>
                        <li class="flex items-center"><input type="checkbox" class="h-5 w-5 rounded border-gray-300 text-[#c5a880] focus:ring-[#c5a880]"><span class="ml-3 text-gray-700">Set up a welcome station with name tags and itinerary.</span></li>
                        <li class="flex items-center"><input type="checkbox" class="h-5 w-5 rounded border-gray-300 text-[#c5a880] focus:ring-[#c5a880]"><span class="ml-3 text-gray-700">Finalize seating layout and recruit volunteers for setup.</span></li>
                        <li class="flex items-center"><input type="checkbox" class="h-5 w-5 rounded border-gray-300 text-[#c5a880] focus:ring-[#c5a880]"><span class="ml-3 text-gray-700">Prepare a fully stocked first-aid kit and have it accessible.</span></li>
                        <li class="flex items-center"><input type="checkbox" class="h-5 w-5 rounded border-gray-300 text-[#c5a880] focus:ring-[#c5a880]"><span class="ml-3 text-gray-700">Charge cameras and designate a family photographer/videographer.</span></li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2024 Love ShinDig Planning Committee. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        const warmPalette = {
            dark: '#4a4a4a',
            accent: '#c5a880',
            lightAccent: '#e6dace',
            neutral: '#a9a9a9',
            background: '#fdfaf6'
        };

        document.addEventListener('DOMContentLoaded', function() {
            const countdownElement = document.getElementById('countdown');
            const shindigDate = new Date('June 18, 2026 16:00:00').getTime();

            function updateCountdown() {
                const now = new Date().getTime();
                const distance = shindigDate - now;

                if (distance < 0) {
                    clearInterval(countdownInterval);
                    countdownElement.innerHTML = "The ShinDig is Here!";
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                countdownElement.innerHTML = `
                    <span>${days}d</span>
                    <span>${hours}h</span>
                    <span>${minutes}m</span>
                    <span>${seconds}s</span>
                `;
            }
            const countdownInterval = setInterval(updateCountdown, 1000);
            updateCountdown();

            // Budget Calculator Logic
            const participantCountInput = document.getElementById('participant-count');
            const totalBudgetSpan = document.getElementById('total-budget');
            const perPersonCost = 250;
            let budgetChart;

            function updateBudget() {
                const participantCount = parseInt(participantCountInput.value) || 0;
                const totalBudget = participantCount * perPersonCost;
                totalBudgetSpan.textContent = `$${totalBudget.toLocaleString()}`;

                if (budgetChart) {
                    budgetChart.data.datasets[0].data = [
                        totalBudget * 0.45, 
                        totalBudget * 0.20, 
                        totalBudget * 0.15, 
                        totalBudget * 0.10, 
                        totalBudget * 0.10
                    ];
                    budgetChart.update();
                }
            }
            
            participantCountInput.addEventListener('input', updateBudget);

            const budgetCtx = document.getElementById('budgetChart').getContext('2d');
            budgetChart = new Chart(budgetCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Venue & Food', 'Entertainment', 'Decorations', 'Communications', 'Contingency'],
                    datasets: [{
                        data: [],
                        backgroundColor: [warmPalette.accent, warmPalette.lightAccent, '#d3c1a5', warmPalette.neutral, '#bfa988'],
                        borderColor: warmPalette.background,
                        borderWidth: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' },
                        tooltip: { 
                            callbacks: { 
                                title: (tooltipItems) => {
                                    const item = tooltipItems[0];
                                    let label = item.chart.data.labels[item.dataIndex];
                                    return Array.isArray(label) ? label.join(' ') : label;
                                },
                                label: (context) => {
                                    const label = context.label || '';
                                    const value = context.parsed || 0;
                                    return `${label}: $${value.toLocaleString()}`;
                                }
                            } 
                        }
                    }
                }
            });
            
            const navLinks = document.querySelectorAll('#nav-menu a');
            const sections = document.querySelectorAll('main section');

            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 64) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active-link');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active-link');
                    }
                });
            });

            updateBudget();

            // Gemini API - Activity Ideas
            const generateIdeasBtn = document.getElementById('generate-ideas-btn');
            const ideasPromptTextarea = document.getElementById('activity-prompt');
            const ideasOutputDiv = document.getElementById('ideas-output');
            const loadingSpinner = document.getElementById('loading-spinner');
            const ideasTextDiv = document.getElementById('ideas-text');

            if (generateIdeasBtn && ideasPromptTextarea && ideasOutputDiv) {
                generateIdeasBtn.addEventListener('click', async () => {
                    const prompt = ideasPromptTextarea.value.trim();
                    if (!prompt) return;
    
                    ideasOutputDiv.classList.remove('hidden');
                    loadingSpinner.classList.remove('hidden');
                    ideasTextDiv.textContent = '';
                    
                    try {
                        const payload = {
                            contents: [{
                                parts: [{ text: `Generate a list of 5 creative and engaging family reunion activity ideas for a group with the following characteristics: ${prompt}` }]
                            }]
                        };
                        const apiKey = "";
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
    
                        if (!response.ok) {
                            throw new Error(`API error: ${response.status} ${response.statusText}`);
                        }
                        const result = await response.json();
                        
                        const text = result?.candidates?.[0]?.content?.parts?.[0]?.text;
                        ideasTextDiv.innerHTML = text ? text.replace(/\n/g, '<br>') : 'No ideas generated. Please try again.';
                    } catch (error) {
                        console.error("Gemini API call failed:", error);
                        ideasTextDiv.innerHTML = 'Sorry, something went wrong. Please try again later.';
                    } finally {
                        loadingSpinner.classList.add('hidden');
                    }
                });
            }

            // Gemini API - TTS Narration
            const playJuneteenthBtn = document.getElementById('play-juneteenth');
            const juneteenthText = "Juneteenth, celebrated on June 19th, commemorates the day in 1865 when enslaved people in Galveston, Texas, received word of their freedom. This historical moment marks the true end of slavery in the United States and is a day to celebrate freedom and African American heritage. It is a powerful reminder of the importance of community and resilience.";

            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            let audioBuffer = null;

            // Helper function to convert base64 to ArrayBuffer
            function base64ToArrayBuffer(base64) {
                const binaryString = atob(base64);
                const len = binaryString.length;
                const bytes = new Uint8Array(len);
                for (let i = 0; i < len; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }
                return bytes.buffer;
            }

            // Helper function to convert PCM audio data to WAV blob
            function pcmToWav(pcmData, sampleRate) {
                const dataLength = pcmData.length * 2;
                const buffer = new ArrayBuffer(44 + dataLength);
                const view = new DataView(buffer);
                let offset = 0;

                // Write WAV header
                // RIFF identifier
                writeString(view, offset, 'RIFF'); offset += 4;
                // file length
                view.setUint32(offset, 36 + dataLength, true); offset += 4;
                // RIFF type
                writeString(view, offset, 'WAVE'); offset += 4;
                // format chunk identifier
                writeString(view, offset, 'fmt '); offset += 4;
                // format chunk length
                view.setUint32(offset, 16, true); offset += 4;
                // sample format (1 = PCM)
                view.setUint16(offset, 1, true); offset += 2;
                // channel count
                view.setUint16(offset, 1, true); offset += 2;
                // sample rate
                view.setUint32(offset, sampleRate, true); offset += 4;
                // byte rate (sample rate * block align)
                view.setUint32(offset, sampleRate * 2, true); offset += 4;
                // block align (channel count * bytes per sample)
                view.setUint16(offset, 2, true); offset += 2;
                // bits per sample
                view.setUint16(offset, 16, true); offset += 2;
                // data chunk identifier
                writeString(view, offset, 'data'); offset += 4;
                // data chunk length
                view.setUint32(offset, dataLength, true); offset += 4;

                // Write PCM data
                for (let i = 0; i < pcmData.length; i++, offset += 2) {
                    view.setInt16(offset, pcmData[i], true);
                }

                return new Blob([view], { type: 'audio/wav' });
            }

            function writeString(view, offset, string) {
                for (let i = 0; i < string.length; i++) {
                    view.setUint8(offset + i, string.charCodeAt(i));
                }
            }
            if (playJuneteenthBtn) {
                async function fetchAndPlayTTS() {
                    if (audioBuffer) {
                        const source = audioContext.createBufferSource();
                        source.buffer = audioBuffer;
                        source.connect(audioContext.destination);
                        source.start(0);
                        return;
                    }
    
                    playJuneteenthBtn.disabled = true;
                    playJuneteenthBtn.innerHTML = `<div class="animate-spin rounded-full h-5 w-5 border-b-2 border-white"></div>`;
    
                    try {
                        const payload = {
                            contents: [{
                                parts: [{ text: juneteenthText }]
                            }],
                            generationConfig: {
                                responseModalities: ["AUDIO"],
                                speechConfig: {
                                    voiceConfig: {
                                        prebuiltVoiceConfig: { voiceName: "Iapetus" }
                                    }
                                }
                            },
                            model: "gemini-2.5-flash-preview-tts"
                        };
                        const apiKey = "";
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;
                        
                        const response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });
    
                        const result = await response.json();
                        const part = result?.candidates?.[0]?.content?.parts?.[0];
                        const audioData = part?.inlineData?.data;
                        
                        if (audioData) {
                            const pcmData = new Int16Array(base64ToArrayBuffer(audioData));
                            const sampleRate = 16000;
                            const wavBlob = pcmToWav(pcmData, sampleRate);
                            
                            const reader = new FileReader();
                            reader.onload = function(event) {
                                audioContext.decodeAudioData(event.target.result, function(buffer) {
                                    audioBuffer = buffer;
                                    const source = audioContext.createBufferSource();
                                    source.buffer = audioBuffer;
                                    source.connect(audioContext.destination);
                                    source.start(0);
                                });
                            };
                            reader.readAsArrayBuffer(wavBlob);
                        } else {
                            console.error("Audio data not found in response.");
                        }
                    } catch (error) {
                        console.error("TTS API call failed:", error);
                    } finally {
                        playJuneteenthBtn.disabled = false;
                        playJuneteenthBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" /></svg>`;
                    }
                }
                playJuneteenthBtn.addEventListener('click', fetchAndPlayTTS);
            }
        });
    </script>
</body>
</html>
